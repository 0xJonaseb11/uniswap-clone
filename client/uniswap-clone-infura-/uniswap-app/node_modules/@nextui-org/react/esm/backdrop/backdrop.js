import e,{useCallback as t,useMemo as r}from"react";import a from"../utils/with-defaults";import i from"../utils/css-transition";import o from"../use-current-state";import s from"../utils/clsx";import n,{KeyCode as l}from"../use-keyboard";import{StyledBackdrop as m,StyledBackdropLayer as c,StyledBackdropContent as p}from"./backdrop.styles";import{__DEV__ as u}from"../utils/assertion";import{jsx as d}from"react/jsx-runtime";import{jsxs as f}from"react/jsx-runtime";import{Fragment as b}from"react/jsx-runtime";const x="nextui-backdrop",k=e.memo((({children:e,onClick:a,onKeyPress:u,visible:k,maxWidth:y,blur:h,animated:$,opacity:v,preventDefault:N,className:j,css:T,...g})=>{const[,C,D]=o(!1),w=e=>{D.current||a&&a(e)},E=t((e=>{e.stopPropagation()}),[]),I=()=>{if(!D.current)return;const e=setTimeout((()=>{C(!1),clearTimeout(e)}),0)},{bindings:M}=n((e=>{u&&u(e)}),[l.Escape,l.Space],{disableGlobalEvent:!0,preventDefault:N}),P=r((()=>k?"open":"closed"),[k]),S=r((()=>f(m,{tabIndex:-1,role:"button","aria-hidden":!0,"data-state":P,onClick:w,onMouseUp:I,css:{$$backdropOpacity:v,...T},className:s(x,`${x}--${P}`,j),...M,...g,children:[d(c,{className:s(`${x}-layer`,h?`${x}-layer-blur`:`${x}-layer-default`),animated:$,blur:h}),d(p,{animated:$,className:`${x}-content`,onClick:E,css:{maxWidth:y},onMouseDown:()=>C(!0),children:e})]})),[e]);return d(b,{children:$?d(i,{name:`${x}-wrapper`,visible:k,enterTime:20,leaveTime:20,clearTime:150,children:S}):k?S:null})}));u&&(k.displayName="NextUI.Backdrop"),k.toString=()=>".nextui-backdrop";export default a(k,{onClick:()=>{},visible:!1,blur:!1,animated:!0,preventDefault:!0,opacity:.5,className:""});