import e,{useEffect as o,useMemo as r,useState as t}from"react";import{createPortal as l}from"react-dom";import n from"../use-portal";import a from"./modal-wrapper";import i from"../backdrop";import{ModalContext as m}from"./modal-context";import s from"../use-body-scroll";import d from"../use-current-state";import c,{KeyCode as u}from"../use-keyboard";import{__DEV__ as p}from"../utils/assertion";import{jsx as f}from"react/jsx-runtime";const b=({children:e,onClose:p,onOpen:b,open:v,autoMargin:x,width:g,className:h,preventClose:C,blur:N,animated:P,fullScreen:S,noPadding:k,...y})=>{const w=n("modal"),[,M]=s(null,{scrollLayer:!0}),[j,B,E]=d(!1),[T,D]=t(!1),G=()=>{p&&p(),B(!1),M(!1)};o((()=>{void 0!==v&&(v&&b&&b(),!v&&E.current&&p&&p(),B(v),M(v))}),[v]);const I=()=>{D(!0);const e=setTimeout((()=>{D(!1),clearTimeout(e)}),300)},{bindings:L}=c((()=>{C?I():G()}),u.Escape,{disableGlobalEvent:!0,preventDefault:!0}),O=r((()=>({close:G,autoMargin:x,noPadding:k})),[]);return w?l(f(m.Provider,{value:O,children:f(i,{onClick:()=>{C?I():G()},visible:j,maxWidth:g,fullScreen:S,blur:N,animated:P,...L,children:f(a,{visible:j,onCloseButtonClick:G,className:h,fullScreen:S,rebound:T,animated:P,...y,children:e})})}),w):null};p&&(b.displayName="NextUI.Modal"),b.toString=()=>".nextui-modal",b.defaultProps={width:"400px",className:"",preventClose:!1,fullScreen:!1,closeButton:!1,animated:!0,blur:!1,scroll:!1,noPadding:!1};export default b;