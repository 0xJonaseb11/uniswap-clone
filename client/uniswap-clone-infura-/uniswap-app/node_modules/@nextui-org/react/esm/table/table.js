import e,{useImperativeHandle as o,useRef as t}from"react";import{useTable as r}from"@react-aria/table";import{useTableState as i}from"@react-stately/table";import{Spacer as l}from"../index";import a from"./table-row-group";import n from"./table-column-header";import s from"./table-header-row";import c from"./table-select-all-checkbox";import m from"./table-pagination";import d from"./table-footer";import h from"./table-body";import{pickSingleChild as p}from"../utils/collections";import{StyledTable as u,StyledTableContainer as b}from"./table.styles";import f from"./table-context";import{excludedTableProps as x}from"../utils/prop-types";import{isInfinityScroll as g,hasPaginationChild as w}from"./utils";import v from"../utils/with-defaults";import y from"../utils/clsx";import{jsx as k}from"react/jsx-runtime";import{jsxs as P}from"react/jsx-runtime";const N=e.forwardRef(((v,N)=>{const{selectionMode:C,selectionBehavior:S,hideLoading:j,children:M,shadow:L,color:B,animated:I,borderWeight:O,bordered:R,containerCss:W,...E}=v,[F,T]=p(M,m),{hasPagination:U,rowsPerPage:V}=w(M,m),q=i({...v,children:F,showSelectionCheckboxes:void 0!==v.showSelectionCheckboxes?v.showSelectionCheckboxes:"multiple"===C&&"replace"!==S});Object.keys(E).forEach((e=>{x.indexOf(e)>-1&&delete E[e]}));const z=t(null);o(N,(()=>null==z?void 0:z.current));const{collection:A}=q,{gridProps:D}=r(v,q,z),G=e.useMemo((()=>({collection:A,color:B,animated:I,rowsPerPage:V})),[A,I,B,V]);return k(f.Provider,{defaultValues:G,children:k(b,{shadow:L,borderWeight:O,bordered:R,className:"nextui-table-container",css:{...W},children:P(u,{ref:z,color:B,shadow:L,animated:I,hoverable:"none"!==C||E.hoverable,isMultiple:"multiple"===C,hasPagination:U,className:y("nextui-table",E.className),...D,...E,children:[P(a,{as:"thead",isFixed:g(A),children:[A.headerRows.map((e=>k(s,{item:e,state:q,children:[...e.childNodes].map((e=>{var o;return null!=e&&null!=(o=e.props)&&o.isSelectionCell?k(c,{column:e,state:q,color:B,animated:I},null==e?void 0:e.key):k(n,{column:e,state:q,animated:I},null==e?void 0:e.key)}))},null==e?void 0:e.key))),!E.sticked&&k(l,{as:"tr",className:"nextui-table-hidden-row",y:.4})]}),k(h,{state:q,color:B,collection:A,animated:I,hasPagination:U,hideLoading:j}),U&&P(d,{children:[k(l,{as:"tr",className:"nextui-table-hidden-row",y:.6}),k("tr",{role:"row",children:k("th",{tabIndex:-1,role:"columnheader",colSpan:A.columnCount,children:T})})]})]})})})}));N.displayName="NextUI.Table",N.toString=()=>".nextui-table";export default v(N,{animated:!0,hideLoading:!1,selectionMode:"none",selectionBehavior:"toggle"});