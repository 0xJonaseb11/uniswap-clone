var e=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=!0,exports.default=void 0;var r=p(require("react")),t=require("react-dom"),a=e(require("../use-portal")),l=e(require("./modal-wrapper")),n=e(require("../backdrop")),o=require("./modal-context"),u=e(require("../use-body-scroll")),i=e(require("../use-current-state")),s=p(require("../use-keyboard")),d=require("../utils/assertion"),c=require("react/jsx-runtime");function f(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:r})(e)}function p(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f(r);if(t&&t.has(e))return t.get(e);var a={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=l?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}const b=({children:e,onClose:d,onOpen:f,open:p,autoMargin:b,width:m,className:v,preventClose:x,blur:y,animated:q,fullScreen:g,noPadding:P,...h})=>{const j=(0,a.default)("modal"),[,M]=(0,u.default)(null,{scrollLayer:!0}),[O,w,C]=(0,i.default)(!1),[_,k]=(0,r.useState)(!1),S=()=>{d&&d(),w(!1),M(!1)};(0,r.useEffect)((()=>{void 0!==p&&(p&&f&&f(),!p&&C.current&&d&&d(),w(p),M(p))}),[p]);const D=()=>{k(!0);const e=setTimeout((()=>{k(!1),clearTimeout(e)}),300)},{bindings:N}=(0,s.default)((()=>{x?D():S()}),s.KeyCode.Escape,{disableGlobalEvent:!0,preventDefault:!0}),E=(0,r.useMemo)((()=>({close:S,autoMargin:b,noPadding:P})),[]);return j?(0,t.createPortal)((0,c.jsx)(o.ModalContext.Provider,{value:E,children:(0,c.jsx)(n.default,{onClick:()=>{x?D():S()},visible:O,maxWidth:m,fullScreen:g,blur:y,animated:q,...N,children:(0,c.jsx)(l.default,{visible:O,onCloseButtonClick:S,className:v,fullScreen:g,rebound:_,animated:q,...h,children:e})})}),j):null};d.__DEV__&&(b.displayName="NextUI.Modal"),b.toString=()=>".nextui-modal",b.defaultProps={width:"400px",className:"",preventClose:!1,fullScreen:!1,closeButton:!1,animated:!0,blur:!1,scroll:!1,noPadding:!1};var m=b;exports.default=m,module.exports=exports.default;