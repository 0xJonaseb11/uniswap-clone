var e=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=!0,exports.default=exports.Image=void 0;var t=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=u?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(a,s,i):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(require("react")),r=e(require("./image.skeleton")),a=e(require("../use-real-shape")),u=e(require("../use-current-state")),s=e(require("../use-resize")),i=require("../utils/dom"),o=require("../utils/assertion"),n=require("./image.styles"),l=e(require("../utils/clsx")),c=require("react/jsx-runtime");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}const d=t.default.forwardRef(((e,o)=>{const{src:f,width:d,height:p,showSkeleton:m=!0,className:g,maxDelay:h=3e3,autoResize:y=!1,objectFit:x="scale-down",containerCss:w,css:b,...j}=e,q=(0,i.useDOMRef)(o),[v,O]=(0,t.useState)(!0),[M,_]=(0,t.useState)(m),{w:D,h:I}=(0,t.useMemo)((()=>({w:d?"number"==typeof d?`${d}px`:d:"auto",h:p?"number"==typeof p?`${p}px`:p:"auto"})),[d,p]),[S,k,N]=(0,u.default)(I),[P,E]=(0,a.default)(q),R=m&&!!d&&!!p;(0,t.useEffect)((()=>{q.current&&q.current.complete&&(O(!1),_(!1))})),(0,t.useEffect)((()=>{const e=setTimeout((()=>{R&&_(!1),clearTimeout(e)}),h);return()=>clearTimeout(e)}),[v]),(0,t.useEffect)((()=>{if(!y)return;const e=0===P.width,t="auto"===N.current;!e&&d&&p&&(P.width<d?!t&&k("auto"):t&&k(I))}),[P,d]),(0,s.default)((()=>{y&&E()}));const T=(0,t.useMemo)((()=>v?"loading":"ready"),[v]);return(0,c.jsxs)(n.StyledImageContainer,{className:(0,l.default)("nextui-image-container",`nextui-image--${T}`,g),"data-state":T,ready:!v||M,css:{width:D,height:S,...w},children:[M&&(0,c.jsx)(r.default,{opacity:1}),(0,c.jsx)(n.StyledImage,{ref:q,className:"nextui-image",width:d,height:p,onLoad:()=>{O(!1)},src:f,"data-state":T,alt:e.alt||"",css:{objectFit:x,...b},...j})]})}));exports.Image=d,o.__DEV__&&(d.displayName="NextUI.Image"),d.toString=()=>".nextui-image";var p=t.default.memo(d);exports.default=p;