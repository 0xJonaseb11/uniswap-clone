import l,{useMemo as e}from"react";import{StyledBaseTableCell as o,StyledTableLoadingRow as t}from"./table.styles";import{mergeProps as r}from"@react-aria/utils";import i from"./table-row-group";import n from"./table-row";import a from"./table-cell";import s from"./table-checkbox-cell";import{useTableContext as d}from"./table-context";import{isInfinityScroll as c}from"./utils";import{Loading as u}from"../index";import m from"../utils/clsx";import{jsx as p}from"react/jsx-runtime";import{jsxs as h}from"react/jsx-runtime";const b=({children:l,collection:b,state:y,animated:g,color:x,hasPagination:f,hideLoading:v,...S})=>{var N,w,C,j,k,H;const{currentPage:P,rowsPerPage:B}=d(),E=e((()=>c(b)),[b.body.props]),L="loading"===(null==(N=b.body)||null==(w=N.props)?void 0:w.loadingState)||"loadingMore"===(null==(C=b.body)||null==(j=C.props)?void 0:j.loadingState),M=e((()=>{const l=[...b.body.childNodes];return f?null==l?void 0:l.slice((P-1)*B,P*B):l}),[f,b,P,B]),A=e((()=>{const l=M.length;return l>=B&&!E?null:p("tr",{role:"row",className:"nextui-table-hidden-row","aria-hidden":"true",children:p(o,{"aria-hidden":"true",colSpan:b.columnCount,style:r({"--nextui--tableBodyEmptySpaceHeight":E?"var(--nextui-space-10)":`calc(${B-l} * var(--nextui-space-14))`},(null==S?void 0:S.style)||{}),css:{height:"var(--nextui--tableBodyEmptySpaceHeight)"}})})}),[b.columnCount,M,B,E]);return h(i,{as:"tbody",className:m("nextui-table-body",S.className),isInfinityScroll:E,onScroll:l=>{if(!E)return;const e=l.target;var o,t;e.scrollHeight-(e.scrollTop+40)<=e.clientHeight&&!L&&(null==(o=b.body)||null==(t=o.props)||null==t.onLoadMore||t.onLoadMore())},css:{pb:"$10",position:"relative",...S.css,...null==(k=b.body)||null==(H=k.props)?void 0:H.css},...S,children:[l,null==M?void 0:M.map((l=>l.hasChildNodes?p(n,{"aria-hidden":"false",item:l,state:y,children:[...l.childNodes].map((l=>{var e;return null!=l&&null!=(e=l.props)&&e.isSelectionCell?p(s,{cell:l,state:y,color:x,animated:g},null==l?void 0:l.key):p(a,{cell:l,state:y},null==l?void 0:l.key)}))},null==l?void 0:l.key):null)),!v&&L&&p(t,{role:"row",className:"nextui-table-hidden-row","aria-hidden":"true",isAtEnd:M.length>0,isAbsolute:!E,children:p(o,{"aria-hidden":"true",colSpan:b.columnCount,children:p(u,{color:x})})}),A]})};b.displayName="NextUI.TableBody",b.toString=()=>".nextui-table-body";export default b;