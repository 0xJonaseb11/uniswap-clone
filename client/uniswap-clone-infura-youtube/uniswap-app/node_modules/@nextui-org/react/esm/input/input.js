import e,{useEffect as t,useImperativeHandle as a,useMemo as r,useRef as l,useState as n}from"react";import{useLabel as i}from"@react-aria/label";import{defaultProps as o}from"./input-props";import d from"../use-theme";import s from"../use-warning";import{StyledInput as c,StyledInputMainContainer as u,StyledInputContainer as p,StyledHelperTextContainer as m,StyledHelperText as h,StyledInputWrapper as f,StyledInputPlaceholder as b,StyledInputClearButton as $,StyledInputBlockLabel as g,StyledInputLabel as y,StyledInputContent as C}from"./input.styles";import x from"../utils/clear-icon";import w from"../utils/clsx";import{__DEV__ as N}from"../utils/assertion";import{jsx as v}from"react/jsx-runtime";import{jsxs as k}from"react/jsx-runtime";const S="nextui-input",R=e.forwardRef((({as:e="input",label:o,labelPlaceholder:R,labelLeft:I,labelRight:L,size:P,helperText:D,color:T,helperColor:B,status:j,contentLeft:F,contentRight:O,contentClickable:V,contentLeftStyling:q,contentRightStyling:U,onContentClick:W,initialValue:z,onChange:E,readOnly:A,value:G,onClearClick:H,clearable:J,shadow:K,animated:M,required:Q,width:X,className:Y,onBlur:Z,onFocus:_,autoComplete:ee,placeholder:te,fullWidth:ae,borderWeight:re,disabled:le,bordered:ne,underlined:ie,rounded:oe,css:de,...se},ce)=>{const ue=l(null);a(ce,(()=>ue.current));const[pe,me]=n(z),[he,fe]=n(!1),{isDark:be}=d(),$e=r((()=>void 0!==G),[G]),ge=r((()=>o||R),[o,R]),ye=r((()=>R?"":te),[te,R]),Ce=r((()=>ae?"100%":X||"initial"),[ae,X]);ie&&N&&(ne&&s("Using underlined and bordered at the same time will have no effect."),oe&&s("Using underlined and rounded at the same time will have no effect."));const xe=(e,t)=>{le||W&&W(e,t)};t((()=>{$e&&me(G)}));const we=r((()=>"textarea"===e),[e]),Ne={...se,...$e?{value:pe}:{defaultValue:z}},{labelProps:ve,fieldProps:ke}=i({...Ne,label:ge}),Se=r((()=>he?"hover":le?"disabled":A?"read-only":pe?"with-value":"normal"),[he,le,A,pe]);return k(u,{color:T,"data-state":Se,helperColor:B,borderWeight:re,status:j,size:P,rounded:oe,disabled:le,css:{width:Ce,...de},className:w(`${S}-main-container`,`${S}-main-container--${Se}`),children:[ge&&v(g,{id:ve.id,className:`${S}-block-label`,htmlFor:ve.htmlFor,isTextarea:we,underlined:ie,animated:M,bordered:ne,rounded:oe,hasContentLeft:!!F,withValue:!!pe,asPlaceholder:!!R,focused:he,children:ge}),v(p,{animated:M,isTextarea:we,underlined:ie,isReadOnly:A,focused:he,className:w(`${S}-container`,`${S}-container--${Se}`,{[`${S}-container--input`]:!we,[`${S}-container--textarea`]:we,[`${S}-container--read-only`]:A},Y),children:k(f,{as:ge?"div":"label",animated:M,bordered:ne,shadow:K,disabled:le,focused:he,isReadOnly:A,underlined:ie,isTextarea:we,className:w(`${S}-wrapper`,`${S}-wrapper--${Se}`,{[`${S}-wrapper--bordered`]:ne,[`${S}-wrapper--underlined`]:ie,[`${S}-wrapper--shadow`]:K}),children:[!ge&&te&&v(b,{className:`${S}-placeholder`,children:te}),I&&v(y,{className:`${S}-label--left`,isDefaultStatus:"default"===j,underlined:ie,bordered:ne,isDark:be,children:I}),F&&v(C,{className:w(`${S}-content`,`${S}-content--left`),applyStyles:q,clickable:V,onClick:e=>xe("left",e),children:F}),v(c,{type:"text",as:e,ref:ue,className:w({[`${S}`]:!we,[`${S}-textarea`]:we,[`${S}-disabled`]:le,[`${S}-rounded`]:oe,[`${S}-${S}-right-content`]:O,[`${S}-left-content`]:F}),isTextarea:we,focused:he,bordered:ne,placeholder:ye,disabled:le,readOnly:A,required:Q,onFocus:e=>{fe(!0),_&&_(e)},onBlur:e=>{fe(!1),Z&&Z(e)},onChange:e=>{le||A||(me(e.target.value),E&&E(e))},autoComplete:ee,hasLeftContent:!!F,hasRightContent:!!O,"data-state":Se,"aria-placeholder":ye,"aria-readonly":A,"aria-required":Q,"aria-multiline":we,...Ne,...ke}),J&&v($,{type:"button",className:`${S}-clear-button`,animated:M,underlined:ie,visible:Boolean(pe),hasContentRight:!!O,disabled:le||A,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),me(""),H&&H(e),!ue.current)return;const t=((e,t)=>({...t,target:e,currentTarget:e}))(ue.current,e);t.target.value="",E&&E(t),ue.current.focus()},children:v(x,{fill:"currentColor"})}),O&&v(C,{className:w(`${S}-content`,`${S}-content--right`),applyStyles:U,clickable:V,onClick:e=>xe("right",e),children:O}),L&&v(y,{className:`${S}-label--right`,isDefaultStatus:"default"===j,underlined:ie,bordered:ne,isRight:!0,isDark:be,children:L})]})}),v(m,{className:`${S}-helper-text-container`,withValue:!!D,children:D&&v(h,{className:`${S}-helper-text`,children:D})})]})}));R.displayName="NextUI.Input",R.defaultProps=o,R.toString=()=>".nextui-input";export default R;