import e,{useEffect as r,useRef as t,useMemo as o,useState as n}from"react";import l from"../utils/with-defaults";import i from"../utils/css-transition";import{isChildElement as s}from"../utils/collections";import c from"./modal-close-button";import{KeyCode as a}from"../use-keyboard";import{StyledModal as u,StyledModalHideTab as m}from"./modal.styles";import d from"../utils/clsx";import{jsx as f}from"react/jsx-runtime";import{jsxs as b}from"react/jsx-runtime";import{Fragment as p}from"react/jsx-runtime";const x="nextui-modal",h=({className:e,children:l,visible:h,fullScreen:$,closeButton:T,rebound:v,animated:j,onCloseButtonClick:w,scroll:y,...N})=>{const k=t(null),C=t(null),g=t(null),[B,I]=n(!1);r((()=>{const e=setTimeout((()=>{I(!0),clearTimeout(e)}),300);return()=>clearTimeout(e)}),[]),r((()=>{if(!h)return;const e=document.activeElement;s(k.current,e)||C.current&&C.current.focus()}),[h]);const S=e=>{const r=e.keyCode===a.Tab;if(!h||!r)return;const t=document.activeElement;e.shiftKey?t===C.current&&g.current&&g.current.focus():t===g.current&&C.current&&C.current.focus()},E=()=>{w&&w()},K=o((()=>h?"open":"closed"),[h]),D=o((()=>b(u,{role:"dialog",tabIndex:-1,"aria-modal":h,ref:k,"data-state":K,fullScreen:$,scroll:y,closeButton:T,className:d(x,`${x}--${K}`,{[`${x}-fullscreen`]:$,[`${x}-with-close-button`]:T,[`${x}-rebound`]:v,[`${x}-rendered`]:B},e),...N,onKeyDown:S,children:[f(m,{role:"button",tabIndex:0,className:`${x}-hide-tab`,"aria-hidden":"true",ref:C}),T&&f(c,{onClick:E}),l,f(m,{role:"button",tabIndex:0,className:`${x}-hide-tab`,"aria-hidden":"true",ref:g})]})),[v,l]);return f(p,{children:j?f(i,{name:`${x}-wrapper`,visible:h,enterTime:20,leaveTime:20,clearTime:300,children:D}):h?D:null})};h.toString=()=>".nextui-modal-wrapper";export default l(h,{className:"",visible:!1,rebound:!1});