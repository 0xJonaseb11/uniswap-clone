import e,{useState as t,useMemo as r,useEffect as o}from"react";import{SSRProvider as m}from"@react-aria/ssr";import{OverlayProvider as s}from"@react-aria/overlays";import i from"../css-baseline";import l,{defaultContext as a}from"./theme-context";import n from"../utils/with-defaults";import u from"../utils/deep-merge";import{copyObject as d}from"../utils/object";import{changeTheme as c,getThemeName as p,getDocumentCSSTokens as v,getDocumentTheme as f}from"./utils";import b from"../use-ssr";import{jsx as h}from"react/jsx-runtime";import{jsxs as y}from"react/jsx-runtime";export default n((({theme:e,disableBaseline:n,children:x})=>{const{isBrowser:j}=b(),[B,N]=t(a.type),g=e=>{N((t=>t!==e?e:t))},w=e=>{const t=f(e);t&&g(t)},E=r((()=>{const e=j?v():{},t=u(d(a.theme),e),r=p(B);return{theme:t,type:r,isDark:"dark"===r}}),[B,j]);return o((()=>{var e,t,r;w(null==(e=document)?void 0:e.documentElement);const o=new MutationObserver((e=>{var t;if(e&&e.length>0&&"BODY"===(null==(t=e[0])?void 0:t.target.nodeName)){var r,o,m;const e=null==(r=document)||null==(o=r.body)||null==(m=o.dataset)?void 0:m.theme;e&&g(e)}else{var s;w(null==(s=document)?void 0:s.documentElement)}}));return o.observe(null==(t=document)?void 0:t.documentElement,{attributes:!0,attributeFilter:["data-theme","style"]}),o.observe(null==(r=document)?void 0:r.body,{attributes:!0,attributeFilter:["data-theme","style"]}),()=>o.disconnect()}),[]),o((()=>{j&&e&&null!=e&&e.className&&(c(e.className),g(p(e.className)))}),[j,e]),h(m,{children:h(s,{children:y(l.Provider,{value:E,children:[!n&&h(i,{}),x]})})})}),{disableBaseline:!1});